<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>&quot;AirHockeyJava&quot;: JavaCV</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">&quot;AirHockeyJava&quot;
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">JavaCV </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction </h2>
<p>JavaCV uses wrappers from the <a href="https://github.com/bytedeco/javacpp-presets">JavaCPP Presets</a> of commonly used libraries by researchers in the field of computer vision (<a href="http://opencv.org/">OpenCV</a>, <a href="http://ffmpeg.org/">FFmpeg</a>, <a href="http://damien.douxchamps.net/ieee1394/libdc1394/">libdc1394</a>, <a href="http://www.ptgrey.com/products/pgrflycapture/">PGR FlyCapture</a>, <a href="http://openkinect.org/">OpenKinect</a>, <a href="http://muonics.net/school/spring05/videoInput/">videoInput</a>, <a href="http://studierstube.icg.tugraz.at/handheld_ar/artoolkitplus.php">ARToolKitPlus</a>, and <a href="http://cmp.felk.cvut.cz/~uricamic/flandmark/">flandmark</a>), and provides utility classes to make their functionality easier to use on the Java platform, including Android.</p>
<p>JavaCV also comes with hardware accelerated full-screen image display (<code>CanvasFrame</code> and <code>GLCanvasFrame</code>), easy-to-use methods to execute code in parallel on multiple cores (<code>Parallel</code>), user-friendly geometric and color calibration of cameras and projectors (<code>GeometricCalibrator</code>, <code>ProCamGeometricCalibrator</code>, <code>ProCamColorCalibrator</code>), detection and matching of feature points (<code>ObjectFinder</code>), a set of classes that implement direct image alignment of projector-camera systems (mainly <code>GNImageAligner</code>, <code>ProjectiveTransformer</code>, <code>ProjectiveColorTransformer</code>, <code>ProCamTransformer</code>, and <code>ReflectanceInitializer</code>), a blob analysis package (<code>Blobs</code>), as well as miscellaneous functionality in the <code>JavaCV</code> class. Some of these classes also have an OpenCL and OpenGL counterpart, their names ending with <code>CL</code> or starting with <code>GL</code>, i.e.: <code>JavaCVCL</code>, <code>GLCanvasFrame</code>, etc.</p>
<p>To learn how to use the API, since documentation currently lacks, please refer to the <a href="#sample-usage">Sample Usage</a> section below as well as the <a href="https://github.com/bytedeco/javacv/tree/master/samples/">sample programs</a>, including two for Android (<code>FacePreview.java</code> and <code>RecordActivity.java</code>), also found in the <code>samples</code> directory. You may also find it useful to refer to the source code of <a href="https://github.com/bytedeco/procamcalib">ProCamCalib</a> and <a href="https://github.com/bytedeco/procamtracker">ProCamTracker</a> as well as <a href="https://github.com/bytedeco/javacv-examples/">examples ported from OpenCV2 Cookbook</a> and the associated <a href="http://code.google.com/p/javacv/wiki/OpenCV2_Cookbook_Examples">wiki pages</a>.</p>
<p>Please keep me informed of any updates or fixes you make to the code so that I may integrate them into the next release. Thank you! And feel free to ask questions on <a href="http://groups.google.com/group/javacv">the mailing list</a> if you encounter any problems with the software! I am sure it is far from perfect...</p>
<h2>Downloads </h2>
<p>To install manually the JAR files, obtain the following archives and follow the instructions in the <a href="#manual-installation">Manual Installation</a> section below.</p>
<ul>
<li>JavaCV 0.10 binary archive <a href="http://search.maven.org/remotecontent?filepath=org/bytedeco/javacv/0.10/javacv-0.10-bin.zip">javacv-0.10-bin.zip</a> (136 MB)</li>
<li>JavaCV 0.10 source archive <a href="http://search.maven.org/remotecontent?filepath=org/bytedeco/javacv/0.10/javacv-0.10-src.zip">javacv-0.10-src.zip</a> (381 KB)</li>
</ul>
<p>The binary archive contains builds for Linux, Mac OS X, Windows, and Android. The JAR files for specific child modules or platforms can also be obtained individually from the <a href="http://search.maven.org/#search|ga|1|bytedeco">Maven Central Repository</a>.</p>
<p>We can also have everything downloaded and installed automatically with:</p>
<ul>
<li>Maven (inside the <code>pom.xml</code> file) ```xml &lt;dependency&gt; &lt;groupId&gt;org.bytedeco&lt;/groupId&gt; &lt;artifactId&gt;javacv&lt;/artifactId&gt; &lt;version&gt;0.10&lt;/version&gt; &lt;/dependency&gt; ```</li>
<li>Gradle (inside the <code>build.gradle</code> file) ```groovy dependencies { compile group: 'org.bytedeco', name: 'javacv', version: '0.10' } ```</li>
<li>SBT (inside the <code>build.sbt</code> file) ```scala classpathTypes += "maven-plugin" libraryDependencies += "org.bytedeco" % "javacv" % "0.10" ```</li>
</ul>
<p>Additionally, we need to either set the <code>platform.dependency</code> system property (via the <code>-D</code> command line option) to something like <code>android-arm</code>, or set the <code>platform.dependencies</code> one to <code>true</code> to get all the binaries for Linux, Mac OS X, and Windows. On build systems where this does not work, we need to add the platform-specific artifacts manually.</p>
<h2>Required Software </h2>
<p>To use JavaCV, you will first need to download and install the following software:</p>
<ul>
<li>An implementation of Java SE 6 or newer<ul>
<li>OpenJDK <a href="http://openjdk.java.net/install/">http://openjdk.java.net/install/</a> or</li>
<li>Sun JDK <a href="http://www.oracle.com/technetwork/java/javase/downloads/">http://www.oracle.com/technetwork/java/javase/downloads/</a> or</li>
<li>IBM JDK <a href="http://www.ibm.com/developerworks/java/jdk/">http://www.ibm.com/developerworks/java/jdk/</a> or</li>
<li>Java SE for Mac OS X <a href="http://developer.apple.com/java/">http://developer.apple.com/java/</a> etc.</li>
</ul>
</li>
</ul>
<p>Further, although not always required, some functionality of JavaCV also relies on:</p>
<ul>
<li>CL Eye Platform SDK (Windows only) <a href="http://codelaboratories.com/downloads/">http://codelaboratories.com/downloads/</a></li>
<li>Android SDK API 8 or newer <a href="http://developer.android.com/sdk/">http://developer.android.com/sdk/</a></li>
<li>JOCL and JOGL from JogAmp <a href="http://jogamp.org/">http://jogamp.org/</a></li>
</ul>
<p>Finally, please make sure everything has the same bitness: <b>32-bit and 64-bit modules do not mix under any circumstances</b>.</p>
<h2>Manual Installation </h2>
<p>Simply put all the desired JAR files (<code>opencv*.jar</code>, <code>ffmpeg*.jar</code>, etc.), in addition to <code>javacpp.jar</code> and <code>javacv.jar</code>, somewhere in your CLASSPATH. Here are some more specific instructions for common cases:</p>
<p>NetBeans (Java SE 6 or newer):</p>
<ol type="1">
<li>In the Projects window, right-click the Libraries node of your project, and select "Add JAR/Folder...".</li>
<li>Locate the JAR files, select them, and click OK.</li>
</ol>
<p>Eclipse (Java SE 6 or newer):</p>
<ol type="1">
<li>Navigate to Project &gt; Properties &gt; Java Build Path &gt; Libraries and click "Add External JARs...".</li>
<li>Locate the JAR files, select them, and click OK.</li>
</ol>
<p>IntelliJ IDEA (Android 2.2 or newer):</p>
<ol type="1">
<li>Follow the instructions on this page: <a href="http://developer.android.com/training/basics/firstapp/">http://developer.android.com/training/basics/firstapp/</a></li>
<li>Copy all the JAR files into the <code>app/libs</code> subdirectory.</li>
<li>Navigate to File &gt; Project Structure &gt; app &gt; Dependencies, click <code>+</code>, and select "2 File dependency".</li>
<li>Select all the JAR files from the <code>libs</code> subdirectory.</li>
</ol>
<p>After that, the wrapper classes for OpenCV and FFmpeg, for example, can automatically access all of their C/C++ APIs:</p>
<ul>
<li><a href="http://docs.opencv.org/">OpenCV documentation</a></li>
<li><a href="http://ffmpeg.org/doxygen/">FFmpeg documentation</a></li>
</ul>
<h2>Sample Usage </h2>
<p>The class definitions are basically ports to Java of the original header files in C/C++, and I deliberately decided to keep as much of the original syntax as possible. For example, here is a method that tries to load an image file, smooth it, and save it back to disk:</p>
<p>```java import static org.bytedeco.javacpp.opencv_core.*; import static org.bytedeco.javacpp.opencv_imgproc.*; import static org.bytedeco.javacpp.opencv_highgui.*;</p>
<p>public class Smoother { public static void smooth(String filename) { IplImage image = cvLoadImage(filename); if (image != null) { cvSmooth(image, image); cvSaveImage(filename, image); cvReleaseImage(image); } } } ```</p>
<p>JavaCV also comes with helper classes and methods on top of OpenCV and FFmpeg to facilitate their integration to the Java platform. Here is a small demo program demonstrating the most frequently useful parts:</p>
<p>```java import java.io.File; import java.net.URL; import org.bytedeco.javacv.*; import org.bytedeco.javacpp.*; import org.bytedeco.javacpp.indexer.*; import static org.bytedeco.javacpp.opencv_core.*; import static org.bytedeco.javacpp.opencv_imgproc.*; import static org.bytedeco.javacpp.opencv_calib3d.*; import static org.bytedeco.javacpp.opencv_objdetect.*;</p>
<p>public class Demo { public static void main(String[] args) throws Exception { String classifierName = null; if (args.length &gt; 0) { classifierName = args[0]; } else { URL url = new URL("https://raw.github.com/Itseez/opencv/2.4/data/haarcascades/haarcascade_frontalface_alt.xml"); File file = Loader.extractResource(url, null, "classifier", ".xml"); file.deleteOnExit(); classifierName = file.getAbsolutePath(); }</p>
<p>// Preload the opencv_objdetect module to work around a known bug. Loader.load(opencv_objdetect.class);</p>
<p>// We can "cast" Pointer objects by instantiating a new object of the desired class. CvHaarClassifierCascade classifier = new CvHaarClassifierCascade(cvLoad(classifierName)); if (classifier.isNull()) { System.err.println("Error loading classifier file \"" + classifierName + ""."); System.exit(1); }</p>
<p>// The available FrameGrabber classes include OpenCVFrameGrabber (opencv_highgui), // DC1394FrameGrabber, FlyCaptureFrameGrabber, OpenKinectFrameGrabber, // PS3EyeFrameGrabber, VideoInputFrameGrabber, and FFmpegFrameGrabber. FrameGrabber grabber = FrameGrabber.createDefault(0); grabber.start();</p>
<p>// FAQ about IplImage: // - For custom raw processing of data, createBuffer() returns an NIO direct // buffer wrapped around the memory pointed by imageData, and under Android we can // also use that Buffer with Bitmap.copyPixelsFromBuffer() and copyPixelsToBuffer(). // - To get a BufferedImage from an IplImage, we may call getBufferedImage(). // - The createFrom() factory method can construct an IplImage from a BufferedImage. // - There are also a few copy*() methods for BufferedImage&lt;-&gt;IplImage data transfers. IplImage grabbedImage = grabber.grab(); int width = grabbedImage.width(); int height = grabbedImage.height(); IplImage grayImage = IplImage.create(width, height, IPL_DEPTH_8U, 1); IplImage rotatedImage = grabbedImage.clone();</p>
<p>// Objects allocated with a create*() or clone() factory method are automatically released // by the garbage collector, but may still be explicitly released by calling release(). // You shall NOT call cvReleaseImage(), cvReleaseMemStorage(), etc. on objects allocated this way. CvMemStorage storage = CvMemStorage.create();</p>
<p>// The OpenCVFrameRecorder class simply uses the CvVideoWriter of opencv_highgui, // but FFmpegFrameRecorder also exists as a more versatile alternative. FrameRecorder recorder = FrameRecorder.createDefault("output.avi", width, height); recorder.start();</p>
<p>// CanvasFrame is a JFrame containing a Canvas component, which is hardware accelerated. // It can also switch into full-screen mode when called with a screenNumber. // We should also specify the relative monitor/camera response for proper gamma correction. CanvasFrame frame = new CanvasFrame("Some Title", CanvasFrame.getDefaultGamma()/grabber.getGamma());</p>
<p>// Let's create some random 3D rotation... CvMat randomR = CvMat.create(3, 3), randomAxis = CvMat.create(3, 1); // We can easily and efficiently access the elements of matrices and images // through an Indexer object with the set of get() and put() methods. DoubleIndexer Ridx = randomR.createIndexer(), axisIdx = randomAxis.createIndexer(); axisIdx.put(0, (Math.random()-0.5)/4, (Math.random()-0.5)/4, (Math.random()-0.5)/4); cvRodrigues2(randomAxis, randomR, null); double f = (width + height)/2.0; Ridx.put(0, 2, Ridx.get(0, 2)*f); Ridx.put(1, 2, Ridx.get(1, 2)*f); Ridx.put(2, 0, Ridx.get(2, 0)/f); Ridx.put(2, 1, Ridx.get(2, 1)/f); System.out.println(Ridx);</p>
<p>// We can allocate native arrays using constructors taking an integer as argument. CvPoint hatPoints = new CvPoint(3);</p>
<p>while (frame.isVisible() &amp;&amp; (grabbedImage = grabber.grab()) != null) { cvClearMemStorage(storage);</p>
<p>// Let's try to detect some faces! but we need a grayscale image... cvCvtColor(grabbedImage, grayImage, CV_BGR2GRAY); CvSeq faces = cvHaarDetectObjects(grayImage, classifier, storage, 1.1, 3, CV_HAAR_DO_CANNY_PRUNING); int total = faces.total(); for (int i = 0; i &lt; total; i++) { CvRect r = new CvRect(cvGetSeqElem(faces, i)); int x = r.x(), y = r.y(), w = r.width(), h = r.height(); cvRectangle(grabbedImage, cvPoint(x, y), cvPoint(x+w, y+h), CvScalar.RED, 1, CV_AA, 0);</p>
<p>// To access or pass as argument the elements of a native array, call position() before. hatPoints.position(0).x(x-w/10) .y(y-h/10); hatPoints.position(1).x(x+w*11/10).y(y-h/10); hatPoints.position(2).x(x+w/2) .y(y-h/2); cvFillConvexPoly(grabbedImage, hatPoints.position(0), 3, CvScalar.GREEN, CV_AA, 0); }</p>
<p>// Let's find some contours! but first some thresholding... cvThreshold(grayImage, grayImage, 64, 255, CV_THRESH_BINARY);</p>
<p>// To check if an output argument is null we may call either isNull() or equals(null). CvSeq contour = new CvSeq(null); cvFindContours(grayImage, storage, contour, Loader.sizeof(CvContour.class), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE); while (contour != null &amp;&amp; !contour.isNull()) { if (contour.elem_size() &gt; 0) { CvSeq points = cvApproxPoly(contour, Loader.sizeof(CvContour.class), storage, CV_POLY_APPROX_DP, cvContourPerimeter(contour)*0.02, 0); cvDrawContours(grabbedImage, points, CvScalar.BLUE, CvScalar.BLUE, -1, 1, CV_AA); } contour = contour.h_next(); }</p>
<p>cvWarpPerspective(grabbedImage, rotatedImage, randomR);</p>
<p>frame.showImage(rotatedImage); recorder.record(rotatedImage); } frame.dispose(); recorder.stop(); grabber.stop(); } } ```</p>
<p>Furthermore, after creating a <code>pom.xml</code> file with the following content: ```xml &lt;project&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;org.bytedeco.javacv&lt;/groupId&gt; &lt;artifactId&gt;demo&lt;/artifactId&gt; &lt;version&gt;0.10&lt;/version&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.bytedeco&lt;/groupId&gt; &lt;artifactId&gt;javacv&lt;/artifactId&gt; &lt;version&gt;0.10&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/project&gt; ```</p>
<p>And by placing the source code above in <code>src/main/java/Demo.java</code>, we can use the following command to have everything first installed automatically and then executed by Maven: ```bash $ mvn package exec:java -Dplatform.dependencies -Dexec.mainClass=Demo ```</p>
<h2>Build Instructions </h2>
<p>If the binary files available above are not enough for your needs, you might need to rebuild them from the source code. To this end, the project files were created for:</p>
<ul>
<li>Maven 2 or 3 <a href="http://maven.apache.org/download.html">http://maven.apache.org/download.html</a></li>
<li>JavaCPP 0.10 <a href="https://github.com/bytedeco/javacpp">https://github.com/bytedeco/javacpp</a></li>
<li>JavaCPP Presets 0.10 <a href="https://github.com/bytedeco/javacpp-presets">https://github.com/bytedeco/javacpp-presets</a></li>
</ul>
<p>Once installed, simply call the usual <code>mvn install</code> command for JavaCPP, its Presets, and JavaCV. By default, no other dependencies than a C++ compiler for JavaCPP are required. Please refer to the comments inside the <code>pom.xml</code> files for further details.</p>
<hr/>
<p> Project lead: Samuel Audet <a href="#" onclick="location.href='mai'+'lto:'+'sam'+'ue'+'l.a'+'ud'+'et '+'at'+' gm'+'ai'+'l.c'+'om'; return false;">samuel.audet `at` gmail.com</a> Developer site: <a href="https://github.com/bytedeco/javacv">https://github.com/bytedeco/javacv</a> Discussion group: <a href="http://groups.google.com/group/javacv">http://groups.google.com/group/javacv</a></p>
<p>Licensed under the GNU General Public License version 2 (GPLv2) <b>with Classpath exception</b>. Please refer to LICENSE.txt or <a href="http://www.gnu.org/software/classpath/license.html">http://www.gnu.org/software/classpath/license.html</a> for details. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 16 2015 15:35:44 for &quot;AirHockeyJava&quot; by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
